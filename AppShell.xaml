<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="App_CrediVnzl.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:pages="clr-namespace:App_CrediVnzl.Pages"
    Title="CrediVzla"
    Shell.BackgroundColor="#2563EB"
    Shell.ForegroundColor="White"
    Shell.TitleColor="White"
    Shell.TabBarBackgroundColor="#2563EB"
    Shell.TabBarForegroundColor="White"
    FlyoutBackgroundColor="#2563EB"
    Shell.FlyoutWidth="300"
    Shell.FlyoutVerticalScrollMode="Disabled">

    <!-- Header del Flyout simplificado -->
    <Shell.FlyoutHeaderTemplate>
        <DataTemplate>
            <Grid BackgroundColor="#1E40AF" HeightRequest="200" Padding="20">
                <!-- Gradiente de fondo -->
                <Grid.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#2563EB" Offset="0.0" />
                        <GradientStop Color="#1E40AF" Offset="1.0" />
                    </LinearGradientBrush>
                </Grid.Background>
                
                <VerticalStackLayout VerticalOptions="Center" Spacing="12" HorizontalOptions="Center">
                    
                    <!-- Avatar circular usando Frame compatible -->
                    <Frame CornerRadius="50" 
                           WidthRequest="100" 
                           HeightRequest="100" 
                           Padding="5"
                           HasShadow="True" 
                           BackgroundColor="#F59E0B" 
                           HorizontalOptions="Center">
                        <!-- Borde blanco usando otro Frame interno -->
                        <Frame CornerRadius="45" 
                               WidthRequest="90" 
                               HeightRequest="90" 
                               Padding="0"
                               HasShadow="False" 
                               BackgroundColor="#F59E0B" 
                               HorizontalOptions="Center"
                               VerticalOptions="Center">
                            <Label Text="ðŸ”§" 
                                   FontSize="50" 
                                   TextColor="White"
                                   HorizontalOptions="Center" 
                                   VerticalOptions="Center"
                                   SemanticProperties.Description="Icono de administrador" />
                        </Frame>
                    </Frame>
                    
                    <!-- InformaciÃ³n del usuario -->
                    <VerticalStackLayout Spacing="4" HorizontalOptions="Center">
                        <Label Text="Administrador" 
                               FontSize="20" 
                               FontAttributes="Bold" 
                               TextColor="White" 
                               HorizontalTextAlignment="Center"
                               SemanticProperties.HeadingLevel="Level1" />
                        <Label Text="Sistema de PrÃ©stamos" 
                               FontSize="13" 
                               TextColor="White" 
                               Opacity="0.9" 
                               HorizontalTextAlignment="Center"
                               SemanticProperties.Description="SubtÃ­tulo del sistema" />
                    </VerticalStackLayout>
                         
                </VerticalStackLayout>
            </Grid>
        </DataTemplate>
    </Shell.FlyoutHeaderTemplate>

    <!-- Footer del Flyout con Cerrar SesiÃ³n -->
    <Shell.FlyoutFooterTemplate>
        <DataTemplate>
            <Grid BackgroundColor="#1E40AF" Padding="15">
                <VerticalStackLayout Spacing="12" VerticalOptions="Center">
                    
                    <!-- Separador visual -->
                    <BoxView HeightRequest="1" 
                             Color="White" 
                             Opacity="0.3" 
                             Margin="10,0" />
                    
                    <!-- BotÃ³n Cerrar SesiÃ³n -->
                    <Frame BackgroundColor="#DC2626" 
                           CornerRadius="12" 
                           Padding="0" 
                           HasShadow="False"
                           HorizontalOptions="FillAndExpand">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnCerrarSesionClicked" />
                        </Frame.GestureRecognizers>
                        <Grid Padding="15,12" ColumnDefinitions="Auto,*">
                            <!-- Icono de flecha usando Frame -->
                            <Frame Grid.Column="0"
                                   BackgroundColor="White"
                                   CornerRadius="15"
                                   WidthRequest="30"
                                   HeightRequest="30"
                                   Padding="0"
                                   HasShadow="False"
                                   VerticalOptions="Center">
                                <Label Text="â¬…" 
                                       FontSize="14" 
                                       TextColor="#DC2626"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center"/>
                            </Frame>
                            <Label Grid.Column="1"
                                   Text="Cerrar SesiÃ³n" 
                                   FontSize="16" 
                                   FontAttributes="Bold" 
                                   TextColor="White"
                                   VerticalOptions="Center"
                                   Margin="12,0,0,0"
                                   SemanticProperties.Description="Cerrar sesiÃ³n y volver a la pÃ¡gina de bienvenida" />
                        </Grid>
                    </Frame>
                    
                    <!-- InformaciÃ³n del copyright -->
                    <VerticalStackLayout Spacing="3" HorizontalOptions="Center" Margin="0,8,0,0">
                        <Label Text="Â© 2024 CrediVzla" 
                               FontSize="11" 
                               TextColor="White" 
                               Opacity="0.7" 
                               HorizontalTextAlignment="Center"
                               SemanticProperties.Description="Copyright CrediVzla 2024" />
                        <Label Text="VersiÃ³n 1.0.0" 
                               FontSize="10" 
                               TextColor="White" 
                               Opacity="0.5" 
                               HorizontalTextAlignment="Center"
                               SemanticProperties.Description="VersiÃ³n de la aplicaciÃ³n" />
                    </VerticalStackLayout>
                          
                </VerticalStackLayout>
            </Grid>
        </DataTemplate>
    </Shell.FlyoutFooterTemplate>

    <!-- PÃGINA INICIAL -->
    <ShellContent ContentTemplate="{DataTemplate pages:BienvenidaPage}" 
                  Route="bienvenida" 
                  Shell.FlyoutBehavior="Disabled" />

    <!-- PÃGINAS AUXILIARES -->
    <ShellContent ContentTemplate="{DataTemplate pages:ConfiguracionInicialPage}" 
                  Route="configuracioninicial" 
                  Shell.FlyoutBehavior="Disabled" 
                  IsVisible="False" />
                  
    <ShellContent ContentTemplate="{DataTemplate pages:LoginPage}" 
                  Route="login" 
                  Shell.FlyoutBehavior="Disabled" 
                  IsVisible="False" />
                  
    <ShellContent ContentTemplate="{DataTemplate pages:DashboardClientePage}" 
                  Route="dashboardcliente" 
                  Shell.FlyoutBehavior="Disabled" 
                  IsVisible="False" />

    <!-- MENÃš PRINCIPAL DEL ADMINISTRADOR -->

    <!-- Dashboard -->
    <FlyoutItem IsVisible="False"
                SemanticProperties.Description="Ir al panel principal de control">
        <FlyoutItem.Icon>
            <FontImageSource Glyph="ðŸ“Š" 
                             Color="White" 
                             Size="20"/>
        </FlyoutItem.Icon>
        <FlyoutItem.Title>Dashboard</FlyoutItem.Title>
        <ShellContent Route="dashboard" 
                      ContentTemplate="{DataTemplate pages:DashboardPage}" />
    </FlyoutItem>

    <!-- Gestionar Usuarios -->
    <FlyoutItem IsVisible="False"
                SemanticProperties.Description="Administrar usuarios del sistema">
        <FlyoutItem.Icon>
            <FontImageSource Glyph="ðŸ‘¥" 
                             Color="White" 
                             Size="20"/>
        </FlyoutItem.Icon>
        <FlyoutItem.Title>Gestionar Usuarios</FlyoutItem.Title>
        <ShellContent Route="gestionarusuarios" 
                      ContentTemplate="{DataTemplate pages:GestionarUsuariosPage}" />
    </FlyoutItem>

    <!-- Mi Cuenta -->
    <FlyoutItem IsVisible="False"
                SemanticProperties.Description="Configurar mi cuenta de usuario">
        <FlyoutItem.Icon>
            <FontImageSource Glyph="ðŸ‘¤" 
                             Color="White" 
                             Size="20"/>
        </FlyoutItem.Icon>
        <FlyoutItem.Title>Mi Cuenta</FlyoutItem.Title>
        <ShellContent Route="configuracioncuenta" 
                      ContentTemplate="{DataTemplate pages:ConfiguracionCuentaPage}" />
    </FlyoutItem>

</Shell>
