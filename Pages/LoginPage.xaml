<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:App_CrediVnzl.ViewModels"
             xmlns:helpers="clr-namespace:App_CrediVnzl.Helpers"
             x:Class="App_CrediVnzl.Pages.LoginPage"
             BackgroundColor="{StaticResource Tertiary}"
             Shell.NavBarIsVisible="False">

    <ScrollView>
        <VerticalStackLayout
            Padding="30"
            Spacing="20"
            VerticalOptions="Center">

            <!-- Botón Volver -->
            <Button
                BackgroundColor="Transparent"
                TextColor="{StaticResource Surface}"
                FontSize="16"
                HorizontalOptions="Start"
                Command="{Binding VolverCommand}"
                Margin="0,10,0,20"
                Padding="0"
                ImageSource="{x:Static helpers:IconPaths.Back}"
                Text=" Volver" />

            <!-- Card de Login -->
            <Frame
                BackgroundColor="{StaticResource Surface}"
                CornerRadius="20"
                HasShadow="True"
                Padding="30"
                MaximumWidthRequest="400">

                <VerticalStackLayout Spacing="25">
                    
                    <!-- Logo -->
                    <Frame
                        BackgroundColor="{StaticResource Beige}"
                        CornerRadius="10"
                        HasShadow="False"
                        Padding="20"
                        HorizontalOptions="Center">
                        <Image
                            Source="logo_credivzla.png"
                            HeightRequest="150"
                            Aspect="AspectFit" />
                    </Frame>

                    <!-- Campo Usuario -->
                    <VerticalStackLayout Spacing="8">
                        <Label
                            Text="Usuario"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource Tertiary}" />
                        <Frame
                            BorderColor="{StaticResource Gray300}"
                            CornerRadius="10"
                            HasShadow="False"
                            Padding="0">
                            <Grid ColumnDefinitions="50,*" Padding="0">
                                <Border Grid.Column="0"
                                        Padding="8"
                                        BackgroundColor="Transparent">
                                    <Image Source="{x:Static helpers:IconPaths.User}"
                                           WidthRequest="24"
                                           HeightRequest="24"
                                           VerticalOptions="Center"
                                           HorizontalOptions="Center" />
                                </Border>
                                <Entry
                                    Grid.Column="1"
                                    Placeholder="Ingresa tu usuario"
                                    Text="{Binding Username}"
                                    FontSize="16"
                                    VerticalOptions="Center" />
                            </Grid>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Campo Contraseña -->
                    <VerticalStackLayout Spacing="8">
                        <Label
                            Text="Contraseña"
                            FontSize="14"
                            FontAttributes="Bold"
                            TextColor="{StaticResource Tertiary}" />
                        <Frame
                            BorderColor="{StaticResource Gray300}"
                            CornerRadius="10"
                            HasShadow="False"
                            Padding="0">
                            <Grid ColumnDefinitions="50,*" Padding="0">
                                <Border Grid.Column="0"
                                        Padding="8"
                                        BackgroundColor="Transparent">
                                    <Image Source="{x:Static helpers:IconPaths.Lock}"
                                           WidthRequest="24"
                                           HeightRequest="24"
                                           VerticalOptions="Center"
                                           HorizontalOptions="Center" />
                                </Border>
                                <Entry
                                    Grid.Column="1"
                                    Placeholder="Ingresa tu contraseña"
                                    Text="{Binding Password}"
                                    IsPassword="True"
                                    FontSize="16"
                                    VerticalOptions="Center" />
                            </Grid>
                        </Frame>
                    </VerticalStackLayout>

                    <!-- Botón Ingresar -->
                    <Button
                        Text="Ingresar"
                        FontSize="18"
                        FontAttributes="Bold"
                        BackgroundColor="{StaticResource Tertiary}"
                        TextColor="{StaticResource Surface}"
                        CornerRadius="10"
                        HeightRequest="50"
                        Command="{Binding LoginCommand}"
                        IsEnabled="{Binding IsLoading, Converter={StaticResource InverseBoolConverter}}"
                        Margin="0,10,0,0" />

                    <!-- Indicador de carga -->
                    <ActivityIndicator
                        IsRunning="{Binding IsLoading}"
                        IsVisible="{Binding IsLoading}"
                        Color="{StaticResource Tertiary}"
                        HorizontalOptions="Center" />

                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
