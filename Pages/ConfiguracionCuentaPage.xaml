<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="App_CrediVnzl.Pages.ConfiguracionCuentaPage"
             Title="Mi Cuenta"
             Shell.NavBarIsVisible="True"
             Shell.BackgroundColor="{StaticResource Tertiary}"
             Shell.ForegroundColor="{StaticResource White}"
             Shell.TitleColor="{StaticResource White}"
             BackgroundColor="#F5F5F5">

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <!-- Header -->
            <Frame BackgroundColor="{StaticResource Tertiary}"
                   CornerRadius="15"
                   Padding="20"
                   HasShadow="True">
                <VerticalStackLayout Spacing="10">
                    <Label Text="??"
                           FontSize="60"
                           HorizontalOptions="Center"/>
                    <Label Text="Configuraci�n de Cuenta"
                           FontSize="22"
                           FontAttributes="Bold"
                           TextColor="White"
                           HorizontalOptions="Center"/>
                    <Label Text="Actualiza tu informaci�n personal"
                           FontSize="14"
                           TextColor="White"
                           Opacity="0.9"
                           HorizontalOptions="Center"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Datos Personales -->
            <Label Text="?? Datos Personales"
                   FontSize="20"
                   FontAttributes="Bold"
                   TextColor="#7B1FA2"/>

            <Frame CornerRadius="15" 
                   Padding="20" 
                   BackgroundColor="White" 
                   HasShadow="True">
                <VerticalStackLayout Spacing="15">

                    <Label Text="Nombre Completo" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Tu nombre completo"
                               Text="{Binding NombreCompleto}"
                               Margin="15,10"/>
                    </Frame>

                    <Label Text="Nombre de Usuario" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"
                           Margin="0,10,0,0"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Usuario para iniciar sesi�n"
                               Text="{Binding NombreUsuario}"
                               Margin="15,10"/>
                    </Frame>

                    <Label Text="Tel�fono" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"
                           Margin="0,10,0,0"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Tu n�mero de tel�fono"
                               Text="{Binding Telefono}"
                               Keyboard="Telephone"
                               Margin="15,10"/>
                    </Frame>

                    <Label Text="Correo Electr�nico" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"
                           Margin="0,10,0,0"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="tu@email.com"
                               Text="{Binding Email}"
                               Keyboard="Email"
                               Margin="15,10"/>
                    </Frame>

                </VerticalStackLayout>
            </Frame>

            <!-- Cambiar Contrase�a -->
            <Label Text="?? Cambiar Contrase�a"
                   FontSize="20"
                   FontAttributes="Bold"
                   TextColor="#7B1FA2"
                   Margin="0,10,0,0"/>

            <Frame BackgroundColor="#FFF3E0" 
                   CornerRadius="12" 
                   Padding="15" 
                   HasShadow="False"
                   BorderColor="#FF9800">
                <HorizontalStackLayout Spacing="10">
                    <Label Text="??" 
                           FontSize="20" 
                           VerticalOptions="Center"/>
                    <Label Text="Deja estos campos vac�os si no deseas cambiar tu contrase�a"
                           FontSize="12"
                           TextColor="#E65100"
                           LineBreakMode="WordWrap"
                           VerticalOptions="Center"/>
                </HorizontalStackLayout>
            </Frame>

            <Frame CornerRadius="15" 
                   Padding="20" 
                   BackgroundColor="White" 
                   HasShadow="True">
                <VerticalStackLayout Spacing="15">

                    <Label Text="Contrase�a Actual" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Tu contrase�a actual"
                               Text="{Binding PasswordActual}"
                               IsPassword="True"
                               Margin="15,10"/>
                    </Frame>

                    <Label Text="Nueva Contrase�a" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"
                           Margin="0,10,0,0"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Nueva contrase�a (m�n. 6 caracteres)"
                               Text="{Binding PasswordNuevo}"
                               IsPassword="True"
                               Margin="15,10"/>
                    </Frame>

                    <Label Text="Confirmar Nueva Contrase�a" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           TextColor="#212121"
                           Margin="0,10,0,0"/>
                    <Frame CornerRadius="10" 
                           Padding="0" 
                           HasShadow="False"
                           BorderColor="#E0E0E0"
                           BackgroundColor="#F9FAFB">
                        <Entry Placeholder="Repite la nueva contrase�a"
                               Text="{Binding PasswordConfirmar}"
                               IsPassword="True"
                               Margin="15,10"/>
                    </Frame>

                </VerticalStackLayout>
            </Frame>

            <!-- Botones -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,10,0,20">
                
                <Button Grid.Column="0"
                        Text="? Cancelar"
                        Command="{Binding CancelarCommand}"
                        BackgroundColor="#9E9E9E"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="55"
                        FontSize="16"
                        FontAttributes="Bold"/>

                <Button Grid.Column="1"
                        Text="?? Guardar Cambios"
                        Command="{Binding GuardarCommand}"
                        BackgroundColor="#7B1FA2"
                        TextColor="White"
                        CornerRadius="12"
                        HeightRequest="55"
                        FontSize="16"
                        FontAttributes="Bold"
                        IsEnabled="{Binding EstaOcupado, Converter={StaticResource InvertedBoolConverter}}"/>

            </Grid>

            <ActivityIndicator IsRunning="{Binding EstaOcupado}"
                               IsVisible="{Binding EstaOcupado}"
                               Color="#7B1FA2"
                               HorizontalOptions="Center"
                               Margin="0,0,0,20"/>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
